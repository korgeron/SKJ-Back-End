<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/fragments :: head('Portal | View Employees')"></head>
<body>

<div class="page">
    <div class="content">
        <button class="logoutBtn" type="button">Logout</button>
        <h1 class="greeting">ALL EMPLOYEES</h1>
        <div class="employee-panel">
            <div th:each="employee : ${employees}">
                <div class="employee-card">
                    <h2 class="card-name" th:text="${employee.getRole()}"></h2>
                    <h2 class="card-name" th:text="${employee.getUsername()}"></h2>
                    <input type="hidden" th:value="${employee.getId()}">
                    <div></div>
                </div>
            </div>
        </div>
        <button class="backBtn" type="button">GO BACK</button>
    </div>
</div>
</body>
<script>

    document.querySelectorAll('.employee-card').forEach((card, i) => {
        card.addEventListener('click', () => {
            card.style.background = "rgba(211, 211, 211, 0.9)"
            let id = card.childNodes.item(5).defaultValue
            console.log(id)

            window.location.assign("/employee/"+id)
        })
    })

    let back = document.querySelector('.backBtn')
    if (back != null) {
        back.addEventListener('click', () => {
            back.style.background = "rgba(132,132,135,0.55)"
            window.location.assign("/employee/manager")
        })
    }

    let logout = document.querySelector('.logoutBtn')
    if (logout != null) {
        logout.addEventListener('click', () => {
            logout.style.background = "rgba(132,132,135,0.55)"
            window.location.assign("/logout")
        })
    }
</script>
</html>